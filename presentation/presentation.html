<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>The Perfect Friends Episode</title>
    <meta charset="utf-8" />
    <meta name="author" content="Team 404: Sophie Bata-Madden, Natalia Okanikova, Barney Gray" />
    <meta name="date" content="2020-12-03" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# The Perfect Friends Episode
### Team 404: Sophie Bata-Madden, Natalia Okanikova, Barney Gray
### University of Edinburgh
### 2020-12-03

---













class: center, middle

# What makes the perfect "Friends" episode?

---

class: inverse, middle, center

# Which Factors influence IMBD Rating?

---

# Characters






```r
friends_speaker_lr &lt;- linear_reg() %&gt;%
  set_engine("lm") %&gt;%
  fit(imdb_rating ~ `Chandler Bing` + `Rachel Green` + `Ross Geller` + `Phoebe Buffay` + 
        `Joey Tribbiani` + `Monica Geller`, data = friends_wanted_wider)

tidy(friends_speaker_lr)
```

```
## # A tibble: 7 x 5
##   term               estimate std.error statistic   p.value
##   &lt;chr&gt;                 &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)       7.92        0.158     50.2    1.24e-125
## 2 `Chandler Bing`  -0.0000432   0.00204   -0.0211 9.83e-  1
## 3 `Rachel Green`    0.000537    0.00197    0.273  7.85e-  1
## 4 `Ross Geller`     0.00660     0.00187    3.53   5.05e-  4
## 5 `Phoebe Buffay`   0.00226     0.00227    0.996  3.21e-  1
## 6 `Joey Tribbiani`  0.000982    0.00198    0.495  6.21e-  1
## 7 `Monica Geller`   0.00449     0.00226    1.98   4.87e-  2
```

---

&lt;img src="presentation_files/figure-html/character-vs-rating-1.png" width="80%" /&gt;
--

- Insert Short Summary of visualisation 


---
# Tone




```r
friends_tone_lr &lt;- linear_reg() %&gt;%
  set_engine("lm") %&gt;%
  fit(imdb_rating ~ Joyful +  Mad + Neutral + Peaceful + Powerful + Sad + Scared, data = friends_emotions_wider)

tidy(friends_tone_lr)
```

```
## # A tibble: 8 x 5
##   term         estimate std.error statistic  p.value
##   &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)  8.65       0.145     59.7    1.63e-67
## 2 Joyful      -0.00199    0.00365   -0.544  5.88e- 1
## 3 Mad         -0.00949    0.00653   -1.45   1.50e- 1
## 4 Neutral     -0.00214    0.00244   -0.875  3.84e- 1
## 5 Peaceful     0.00605    0.00706    0.857  3.94e- 1
## 6 Powerful    -0.000416   0.00620   -0.0671 9.47e- 1
## 7 Sad         -0.00489    0.0107    -0.456  6.50e- 1
## 8 Scared       0.00163    0.00489    0.333  7.40e- 1
```

Note: we only have info on first 4 seasons

---
# Tone
&lt;img src="presentation_files/figure-html/tone-vs-imdb-rating-1.png" width="80%" /&gt;

Note: we only have info on first 4 seasons

---
# Writer





&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; written_by &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mean_rating &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; med_rating &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n_episodes &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Suzie Villandry &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.100000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Gregory S. MalinsMarta Kauffman &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.050000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.05 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Scott SilveriAndrew Reich &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.050000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.05 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Brian Caldirola &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.000000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andrew ReichGregory S. Malins &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.950000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.95 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Michael Borkow Jill Condon &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.950000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.95 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Amy Toomin &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.760000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.70 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; David Crane &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.730435 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.70 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Scott SilveriMarta Kauffman &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.725000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.75 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Mike SikowitzMichael Borkow &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.700000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.70 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

The highest rated writer is Suzie Villandry, however she has only written one episode;
should we consider writers with not many episodes?

---
#Writer (cont.)

Here we look at the top 10 writers with 10 or more episodes.

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; written_by &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mean_rating &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; med_rating &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n_episodes &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; David Crane &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.730435 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Marta Kauffman &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.673684 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexa Junge &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.558333 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Gregory S. Malins &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.550000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Scott Silveri &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.545454 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Shana Goldberg-Meehan &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.504000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Ted Cohen &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.500000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Sherry Bilsing-Graham &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.481818 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Ellen Plummer &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.464706 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andrew Reich &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.413044 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
---
#Director

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; directed_by &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mean_rating &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; med_rating &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n_episodes &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Kevin S. Bright &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.656604 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.70 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 53 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; David Schwimmer &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.550000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.55 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Michael Lembeck &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.520833 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.50 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; James Burrows &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.506667 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.30 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Gary Halvorson &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.401852 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.35 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Gail Mancuso &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.357143 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.35 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Peter Bonerz &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.325000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.25 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Ben Weiss &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.300000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.25 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---
# Outcome

According to our models, the perfect "Friends" episode should be:
 - written by David Crane (or Suzie Villandry)
 - directed by Kevin S. Bright (or David Schwimmer)
 - scared and peaceful 
 - mostly the Gellers talking 
 
---
# Outcome

the actual "perfect" episode is:


```r
friends_info_arranged &lt;- friends_info %&gt;%
  arrange(desc(imdb_rating))%&gt;%
  select(season, episode, title,imdb_rating, written_by, directed_by)

kable(head(friends_info_arranged, n = 10))
```



| season| episode|title                              | imdb_rating|written_by                                                                                           |directed_by     |
|------:|-------:|:----------------------------------|-----------:|:----------------------------------------------------------------------------------------------------|:---------------|
|      5|      14|The One Where Everybody Finds Out  |         9.7|Alexa Junge                                                                                          |Michael Lembeck |
|     10|      17|The Last One                       |         9.7|Marta Kauffman &amp; David Crane                                                                         |Kevin S. Bright |
|     10|      18|The Last One                       |         9.7|Marta Kauffman &amp; David Crane                                                                         |Kevin S. Bright |
|      4|      12|The One with the Embryos           |         9.5|Jill Condon &amp; Amy Toomin                                                                             |Kevin S. Bright |
|      2|      14|The One with the Prom Video        |         9.4|Alexa Junge                                                                                          |James Burrows   |
|      6|      25|The One with the Proposal          |         9.3|Shana Goldberg-Meehan &amp; Scott SilveriAndrew Reich &amp; Ted Cohen                                        |Kevin S. Bright |
|      8|       4|The One with the Videotape         |         9.3|Scott Silveri                                                                                        |Kevin S. Bright |
|      8|       9|The One with the Rumor             |         9.3|Shana Goldberg-Meehan                                                                                |Gary Halvorson  |
|      4|      24|The One with Ross' Wedding         |         9.2|Michael BorkowStory by : Jill Condon &amp; Amy ToominTeleplay by : Shana Goldberg-Meehan &amp; Scott Silveri |Kevin S. Bright |
|      5|       8|The One with All the Thanksgivings |         9.2|Gregory S. Malins                                                                                    |Kevin S. Bright |
 I haven't added how much each character speaks yet but will do 

---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
